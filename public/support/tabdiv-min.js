var vextab_parser=function(){function t(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,e:3,maybe_vextab:4,EOF:5,vextab:6,stave:7,voice:8,maybe_options:9,stave_data:10,OPTIONS:11,options:12,TABSTAVE:13,VOICE:14,stave_additions:15,TEXT:16,text:17,NOTES:18,notes:19,WORD:20,"=":21,STR:22,",":23,lingo:24,line:25,chord:26,time:27,bar:28,"[":29,"]":30,tuplets:31,annotations:32,command:33,rest:34,"|":35,":":36,frets:37,maybe_decorator:38,"/":39,string:40,chord_line:41,".":42,"(":43,")":44,articulation:45,NUMBER:46,abc:47,_:48,timed_fret:49,time_values:50,maybe_dot:51,time_unit:52,maybe_slash:53,w:54,h:55,q:56,d:57,S:58,"-":59,s:60,t:61,T:62,b:63,p:64,v:65,V:66,u:67,"^":68,$:69,annotation_words:70,"!":71,COMMAND:72,"#":73,ABC:74,abc_accidental:75,accidental_type:76,"@":77,n:78,"~":79,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",11:"OPTIONS",13:"TABSTAVE",14:"VOICE",16:"TEXT",18:"NOTES",20:"WORD",21:"=",22:"STR",23:",",29:"[",30:"]",35:"|",36:":",39:"/",42:".",43:"(",44:")",46:"NUMBER",48:"_",54:"w",55:"h",56:"q",57:"d",58:"S",59:"-",60:"s",61:"t",62:"T",63:"b",64:"p",65:"v",66:"V",67:"u",68:"^",69:"$",71:"!",72:"COMMAND",73:"#",74:"ABC",77:"@",78:"n",79:"~"},productions_:[0,[3,2],[4,0],[4,1],[6,1],[6,2],[7,3],[7,2],[7,2],[8,1],[8,1],[10,1],[10,2],[15,2],[15,2],[9,0],[9,1],[12,3],[12,4],[17,1],[17,3],[19,1],[19,2],[24,1],[24,1],[24,1],[24,1],[24,1],[24,1],[24,1],[24,1],[24,1],[24,1],[28,1],[28,3],[28,3],[28,3],[28,3],[28,3],[25,4],[41,1],[41,3],[26,4],[26,5],[37,1],[37,1],[37,4],[37,2],[37,4],[49,5],[49,1],[49,5],[49,8],[49,1],[49,4],[27,3],[50,2],[52,1],[52,1],[52,1],[52,1],[51,0],[51,1],[53,0],[53,1],[40,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[38,1],[38,1],[38,1],[38,1],[38,0],[31,3],[31,5],[32,3],[70,1],[70,3],[33,3],[34,2],[34,3],[34,4],[47,3],[75,1],[75,2],[75,1],[75,2],[75,1],[75,0],[76,0],[76,1]],performAction:function(t,e,s,i,n,r,a){var c=r.length-1;switch(n){case 1:return Vex.Flow.VexTab.DEBUG&&r[c-1]&&(console.log(r[c-1]),console.log(JSON.stringify(r[c-1],null," "))),r[c-1];case 2:this.$=null;break;case 3:this.$=r[c];break;case 4:this.$=[r[c]];break;case 5:this.$=[].concat(r[c-1],r[c]);break;case 6:this.$={element:r[c-2],options:r[c-1],notes:r[c].notes,text:r[c].text,_l:a[c-2].first_line,_c:a[c-2].first_column};break;case 7:this.$={element:r[c-1],options:r[c],_l:a[c-1].first_line,_c:a[c-1].first_column};break;case 8:this.$={element:"options",params:r[c],_l:a[c-1].first_line,_c:a[c-1].first_column};break;case 11:this.$=r[c];break;case 12:var h=[].concat(r[c-1].text,r[c].text),o=[].concat(r[c-1].notes,r[c].notes);this.$={text:h,notes:o};break;case 13:this.$={text:r[c],notes:[]};break;case 14:this.$={notes:r[c],text:[]};break;case 15:this.$=null;break;case 16:this.$=r[c];break;case 17:this.$=[{key:r[c-2],value:r[c],_l:a[c-2].first_line,_c:a[c-2].first_column}];break;case 18:this.$=[].concat(r[c-3],[{key:r[c-2],value:r[c],_l:a[c-2].first_line,_c:a[c-2].first_column}]);break;case 19:this.$=[{text:r[c],_l:a[c].first_line,_c:a[c].first_column}];break;case 20:this.$=[].concat(r[c-2],{text:r[c],_l:a[c].first_line,_c:a[c].first_column});break;case 21:this.$=r[c];break;case 22:this.$=[].concat(r[c-1],r[c]);break;case 23:this.$=r[c];break;case 24:this.$=r[c];break;case 25:this.$=r[c];break;case 26:this.$=[{command:"bar",type:r[c],_l:a[c].first_line,_c:a[c].first_column}];break;case 27:this.$=[{command:"open_beam",_l:a[c].first_line,_c:a[c].first_column}];break;case 28:this.$=[{command:"close_beam",_l:a[c].first_line,_c:a[c].first_column}];break;case 29:this.$=[{command:"tuplet",params:r[c],_l:a[c].first_line,_c:a[c].first_column}];break;case 30:this.$=[{command:"annotations",params:r[c],_l:a[c].first_line,_c:a[c].first_column}];break;case 31:this.$=[{command:"command",params:r[c],_l:a[c].first_line,_c:a[c].first_column}];break;case 32:this.$=[{command:"rest",params:r[c]}];break;case 33:this.$="single";break;case 34:this.$="double";break;case 35:this.$="end";break;case 36:this.$="repeat-end";break;case 37:this.$="repeat-begin";break;case 38:this.$="repeat-both";break;case 39:_.extend(_.last(r[c-3]),{decorator:r[c-2]}),_.each(r[c-3],function(t){t.string=r[c]}),this.$=r[c-3];break;case 40:this.$=r[c];break;case 41:this.$=[].concat(r[c-2],r[c]);break;case 42:this.$=[{chord:r[c-2],decorator:r[c]}];break;case 43:this.$=[{chord:r[c-2],articulation:r[c-4],decorator:r[c]}];break;case 44:this.$=[{fret:r[c],_l:a[c].first_line,_c:a[c].first_column}];break;case 45:this.$=[{abc:r[c],_l:a[c].first_line,_c:a[c].first_column}];break;case 46:this.$=[{abc:r[c-3],octave:r[c-2],fret:r[c],_l:a[c-3].first_line,_c:a[c-3].first_column}];break;case 47:this.$=[_.extend(r[c],{articulation:r[c-1]})];break;case 48:_.extend(_.last(r[c-3]),{decorator:r[c-2]}),_.extend(r[c],{articulation:r[c-1]}),r[c-3].push(r[c]),this.$=r[c-3];break;case 49:this.$={time:r[c-3],dot:r[c-2],fret:r[c],_l:a[c-4].first_line,_c:a[c-4].first_column};break;case 50:this.$={fret:r[c],_l:a[c].first_line,_c:a[c].first_column};break;case 51:this.$={time:r[c-3],dot:r[c-2],abc:r[c]};break;case 52:this.$={time:r[c-6],dot:r[c-5],abc:r[c-3],octave:r[c-2],fret:r[c]};break;case 53:this.$={abc:r[c],_l:a[c].first_line,_c:a[c].first_column};break;case 54:this.$={abc:r[c-3],octave:r[c-2],fret:r[c],_l:a[c-3].first_line,_c:a[c-3].first_column};break;case 55:this.$={time:r[c-1],dot:r[c]};break;case 56:this.$=r[c-1]+r[c];break;case 57:this.$=r[c];break;case 58:this.$=r[c];break;case 59:this.$=r[c];break;case 60:this.$=r[c];break;case 61:this.$=!1;break;case 62:this.$=!0;break;case 63:this.$="";break;case 64:this.$="s";break;case 65:this.$=r[c];break;case 66:this.$="-";break;case 67:this.$="s";break;case 68:this.$="t";break;case 69:this.$="T";break;case 70:this.$="b";break;case 71:this.$="h";break;case 72:this.$="p";break;case 73:this.$="v";break;case 74:this.$="V";break;case 75:this.$="u";break;case 76:this.$="d";break;case 77:this.$=null;break;case 78:this.$={tuplet:r[c-1]};break;case 79:this.$={tuplet:r[c-3],notes:r[c-1]};break;case 80:this.$=r[c-1];break;case 81:this.$=[r[c]];break;case 82:this.$=[].concat(r[c-2],r[c]);break;case 83:this.$=r[c-1];break;case 84:this.$={position:0};break;case 85:this.$={position:r[c-1]};break;case 86:this.$={position:-1*r[c-1]};break;case 87:this.$={key:r[c-2],accidental:r[c-1],accidental_type:r[c]};break;case 88:this.$="#";break;case 89:this.$="##";break;case 90:this.$="b";break;case 91:this.$="bb";break;case 92:this.$="n";break;case 94:this.$=null;break;case 95:this.$="c"}},table:[{3:1,4:2,5:[2,2],6:3,7:4,8:5,11:[1,6],13:[1,7],14:[1,8]},{1:[3]},{5:[1,9]},{5:[2,3],7:10,8:5,11:[1,6],13:[1,7],14:[1,8]},{5:[2,4],11:[2,4],13:[2,4],14:[2,4]},{5:[2,15],9:11,11:[2,15],12:12,13:[2,15],14:[2,15],16:[2,15],18:[2,15],20:[1,13]},{12:14,20:[1,13]},{5:[2,9],11:[2,9],13:[2,9],14:[2,9],16:[2,9],18:[2,9],20:[2,9]},{5:[2,10],11:[2,10],13:[2,10],14:[2,10],16:[2,10],18:[2,10],20:[2,10]},{1:[2,1]},{5:[2,5],11:[2,5],13:[2,5],14:[2,5]},{5:[2,7],10:15,11:[2,7],13:[2,7],14:[2,7],15:16,16:[1,17],18:[1,18]},{5:[2,16],11:[2,16],13:[2,16],14:[2,16],16:[2,16],18:[2,16],20:[1,19]},{21:[1,20]},{5:[2,8],11:[2,8],13:[2,8],14:[2,8],20:[1,19]},{5:[2,6],11:[2,6],13:[2,6],14:[2,6],15:21,16:[1,17],18:[1,18]},{5:[2,11],11:[2,11],13:[2,11],14:[2,11],16:[2,11],18:[2,11]},{17:22,22:[1,23]},{19:24,21:[1,41],24:25,25:26,26:27,27:28,28:29,29:[1,30],30:[1,31],31:32,32:33,33:34,34:35,35:[1,40],36:[1,39],37:36,43:[1,37],45:38,46:[1,46],47:47,55:[1,53],59:[1,48],60:[1,49],61:[1,50],62:[1,51],63:[1,52],64:[1,54],68:[1,42],69:[1,43],71:[1,44],73:[1,45],74:[1,55]},{21:[1,56]},{20:[1,57]},{5:[2,12],11:[2,12],13:[2,12],14:[2,12],16:[2,12],18:[2,12]},{5:[2,13],11:[2,13],13:[2,13],14:[2,13],16:[2,13],18:[2,13],23:[1,58]},{5:[2,19],11:[2,19],13:[2,19],14:[2,19],16:[2,19],18:[2,19],23:[2,19]},{5:[2,14],11:[2,14],13:[2,14],14:[2,14],16:[2,14],18:[2,14],21:[1,41],24:59,25:26,26:27,27:28,28:29,29:[1,30],30:[1,31],31:32,32:33,33:34,34:35,35:[1,40],36:[1,39],37:36,43:[1,37],45:38,46:[1,46],47:47,55:[1,53],59:[1,48],60:[1,49],61:[1,50],62:[1,51],63:[1,52],64:[1,54],68:[1,42],69:[1,43],71:[1,44],73:[1,45],74:[1,55]},{5:[2,21],11:[2,21],13:[2,21],14:[2,21],16:[2,21],18:[2,21],21:[2,21],29:[2,21],30:[2,21],35:[2,21],36:[2,21],43:[2,21],46:[2,21],55:[2,21],59:[2,21],60:[2,21],61:[2,21],62:[2,21],63:[2,21],64:[2,21],68:[2,21],69:[2,21],71:[2,21],73:[2,21],74:[2,21]},{5:[2,23],11:[2,23],13:[2,23],14:[2,23],16:[2,23],18:[2,23],21:[2,23],29:[2,23],30:[2,23],35:[2,23],36:[2,23],43:[2,23],46:[2,23],55:[2,23],59:[2,23],60:[2,23],61:[2,23],62:[2,23],63:[2,23],64:[2,23],68:[2,23],69:[2,23],71:[2,23],73:[2,23],74:[2,23]},{5:[2,24],11:[2,24],13:[2,24],14:[2,24],16:[2,24],18:[2,24],21:[2,24],29:[2,24],30:[2,24],35:[2,24],36:[2,24],43:[2,24],46:[2,24],55:[2,24],59:[2,24],60:[2,24],61:[2,24],62:[2,24],63:[2,24],64:[2,24],68:[2,24],69:[2,24],71:[2,24],73:[2,24],74:[2,24]},{5:[2,25],11:[2,25],13:[2,25],14:[2,25],16:[2,25],18:[2,25],21:[2,25],29:[2,25],30:[2,25],35:[2,25],36:[2,25],43:[2,25],46:[2,25],55:[2,25],59:[2,25],60:[2,25],61:[2,25],62:[2,25],63:[2,25],64:[2,25],68:[2,25],69:[2,25],71:[2,25],73:[2,25],74:[2,25]},{5:[2,26],11:[2,26],13:[2,26],14:[2,26],16:[2,26],18:[2,26],21:[2,26],29:[2,26],30:[2,26],35:[2,26],36:[2,26],43:[2,26],46:[2,26],55:[2,26],59:[2,26],60:[2,26],61:[2,26],62:[2,26],63:[2,26],64:[2,26],68:[2,26],69:[2,26],71:[2,26],73:[2,26],74:[2,26]},{5:[2,27],11:[2,27],13:[2,27],14:[2,27],16:[2,27],18:[2,27],21:[2,27],29:[2,27],30:[2,27],35:[2,27],36:[2,27],43:[2,27],46:[2,27],55:[2,27],59:[2,27],60:[2,27],61:[2,27],62:[2,27],63:[2,27],64:[2,27],68:[2,27],69:[2,27],71:[2,27],73:[2,27],74:[2,27]},{5:[2,28],11:[2,28],13:[2,28],14:[2,28],16:[2,28],18:[2,28],21:[2,28],29:[2,28],30:[2,28],35:[2,28],36:[2,28],43:[2,28],46:[2,28],55:[2,28],59:[2,28],60:[2,28],61:[2,28],62:[2,28],63:[2,28],64:[2,28],68:[2,28],69:[2,28],71:[2,28],73:[2,28],74:[2,28]},{5:[2,29],11:[2,29],13:[2,29],14:[2,29],16:[2,29],18:[2,29],21:[2,29],29:[2,29],30:[2,29],35:[2,29],36:[2,29],43:[2,29],46:[2,29],55:[2,29],59:[2,29],60:[2,29],61:[2,29],62:[2,29],63:[2,29],64:[2,29],68:[2,29],69:[2,29],71:[2,29],73:[2,29],74:[2,29]},{5:[2,30],11:[2,30],13:[2,30],14:[2,30],16:[2,30],18:[2,30],21:[2,30],29:[2,30],30:[2,30],35:[2,30],36:[2,30],43:[2,30],46:[2,30],55:[2,30],59:[2,30],60:[2,30],61:[2,30],62:[2,30],63:[2,30],64:[2,30],68:[2,30],69:[2,30],71:[2,30],73:[2,30],74:[2,30]},{5:[2,31],11:[2,31],13:[2,31],14:[2,31],16:[2,31],18:[2,31],21:[2,31],29:[2,31],30:[2,31],35:[2,31],36:[2,31],43:[2,31],46:[2,31],55:[2,31],59:[2,31],60:[2,31],61:[2,31],62:[2,31],63:[2,31],64:[2,31],68:[2,31],69:[2,31],71:[2,31],73:[2,31],74:[2,31]},{5:[2,32],11:[2,32],13:[2,32],14:[2,32],16:[2,32],18:[2,32],21:[2,32],29:[2,32],30:[2,32],35:[2,32],36:[2,32],43:[2,32],46:[2,32],55:[2,32],59:[2,32],60:[2,32],61:[2,32],62:[2,32],63:[2,32],64:[2,32],68:[2,32],69:[2,32],71:[2,32],73:[2,32],74:[2,32]},{38:60,39:[2,77],55:[2,77],57:[1,64],59:[2,77],60:[2,77],61:[2,77],62:[2,77],63:[2,77],64:[2,77],65:[1,61],66:[1,62],67:[1,63]},{25:66,37:36,41:65,45:67,46:[1,46],47:47,55:[1,53],59:[1,48],60:[1,49],61:[1,50],62:[1,51],63:[1,52],64:[1,54],74:[1,55]},{36:[1,70],43:[1,68],46:[1,71],47:72,49:69,74:[1,55]},{46:[1,75],50:73,52:74,54:[1,76],55:[1,77],56:[1,78]},{5:[2,33],11:[2,33],13:[2,33],14:[2,33],16:[2,33],18:[2,33],21:[2,33],29:[2,33],30:[2,33],35:[2,33],36:[2,33],43:[2,33],46:[2,33],55:[2,33],59:[2,33],60:[2,33],61:[2,33],62:[2,33],63:[2,33],64:[2,33],68:[2,33],69:[2,33],71:[2,33],73:[2,33],74:[2,33]},{35:[1,79],36:[1,80]},{46:[1,81]},{20:[1,83],70:82},{72:[1,84]},{46:[1,86],59:[1,87],73:[1,85]},{39:[2,44],55:[2,44],57:[2,44],59:[2,44],60:[2,44],61:[2,44],62:[2,44],63:[2,44],64:[2,44],65:[2,44],66:[2,44],67:[2,44]},{39:[2,45],46:[1,88],55:[2,45],57:[2,45],59:[2,45],60:[2,45],61:[2,45],62:[2,45],63:[2,45],64:[2,45],65:[2,45],66:[2,45],67:[2,45]},{36:[2,66],43:[2,66],46:[2,66],74:[2,66]},{36:[2,67],43:[2,67],46:[2,67],74:[2,67]},{36:[2,68],43:[2,68],46:[2,68],74:[2,68]},{36:[2,69],43:[2,69],46:[2,69],74:[2,69]},{36:[2,70],43:[2,70],46:[2,70],74:[2,70]},{36:[2,71],43:[2,71],46:[2,71],74:[2,71]},{36:[2,72],43:[2,72],46:[2,72],74:[2,72]},{39:[2,93],46:[2,93],55:[2,93],57:[2,93],59:[2,93],60:[2,93],61:[2,93],62:[2,93],63:[2,93],64:[2,93],65:[2,93],66:[2,93],67:[2,93],73:[1,90],75:89,77:[1,91],78:[1,92],79:[2,93]},{20:[1,93]},{5:[2,17],11:[2,17],13:[2,17],14:[2,17],16:[2,17],18:[2,17],20:[2,17]},{22:[1,94]},{5:[2,22],11:[2,22],13:[2,22],14:[2,22],16:[2,22],18:[2,22],21:[2,22],29:[2,22],30:[2,22],35:[2,22],36:[2,22],43:[2,22],46:[2,22],55:[2,22],59:[2,22],60:[2,22],61:[2,22],62:[2,22],63:[2,22],64:[2,22],68:[2,22],69:[2,22],71:[2,22],73:[2,22],74:[2,22]},{39:[1,95],45:96,55:[1,53],59:[1,48],60:[1,49],61:[1,50],62:[1,51],63:[1,52],64:[1,54]},{5:[2,73],11:[2,73],13:[2,73],14:[2,73],16:[2,73],18:[2,73],21:[2,73],29:[2,73],30:[2,73],35:[2,73],36:[2,73],39:[2,73],43:[2,73],46:[2,73],55:[2,73],59:[2,73],60:[2,73],61:[2,73],62:[2,73],63:[2,73],64:[2,73],68:[2,73],69:[2,73],71:[2,73],73:[2,73],74:[2,73]},{5:[2,74],11:[2,74],13:[2,74],14:[2,74],16:[2,74],18:[2,74],21:[2,74],29:[2,74],30:[2,74],35:[2,74],36:[2,74],39:[2,74],43:[2,74],46:[2,74],55:[2,74],59:[2,74],60:[2,74],61:[2,74],62:[2,74],63:[2,74],64:[2,74],68:[2,74],69:[2,74],71:[2,74],73:[2,74],74:[2,74]},{5:[2,75],11:[2,75],13:[2,75],14:[2,75],16:[2,75],18:[2,75],21:[2,75],29:[2,75],30:[2,75],35:[2,75],36:[2,75],39:[2,75],43:[2,75],46:[2,75],55:[2,75],59:[2,75],60:[2,75],61:[2,75],62:[2,75],63:[2,75],64:[2,75],68:[2,75],69:[2,75],71:[2,75],73:[2,75],74:[2,75]},{5:[2,76],11:[2,76],13:[2,76],14:[2,76],16:[2,76],18:[2,76],21:[2,76],29:[2,76],30:[2,76],35:[2,76],36:[2,76],39:[2,76],43:[2,76],46:[2,76],55:[2,76],59:[2,76],60:[2,76],61:[2,76],62:[2,76],63:[2,76],64:[2,76],68:[2,76],69:[2,76],71:[2,76],73:[2,76],74:[2,76]},{42:[1,98],44:[1,97]},{42:[2,40],44:[2,40]},{36:[1,70],46:[1,71],47:72,49:69,74:[1,55]},{25:66,37:36,41:99,45:67,46:[1,46],47:47,55:[1,53],59:[1,48],60:[1,49],61:[1,50],62:[1,51],63:[1,52],64:[1,54],74:[1,55]},{39:[2,47],55:[2,47],57:[2,47],59:[2,47],60:[2,47],61:[2,47],62:[2,47],63:[2,47],64:[2,47],65:[2,47],66:[2,47],67:[2,47]},{46:[1,75],50:100,52:74,54:[1,76],55:[1,77],56:[1,78]},{39:[2,50],55:[2,50],57:[2,50],59:[2,50],60:[2,50],61:[2,50],62:[2,50],63:[2,50],64:[2,50],65:[2,50],66:[2,50],67:[2,50]},{39:[2,53],46:[1,101],55:[2,53],57:[2,53],59:[2,53],60:[2,53],61:[2,53],62:[2,53],63:[2,53],64:[2,53],65:[2,53],66:[2,53],67:[2,53]},{5:[2,61],11:[2,61],13:[2,61],14:[2,61],16:[2,61],18:[2,61],21:[2,61],29:[2,61],30:[2,61],35:[2,61],36:[2,61],43:[2,61],46:[2,61],51:102,55:[2,61],57:[1,103],59:[2,61],60:[2,61],61:[2,61],62:[2,61],63:[2,61],64:[2,61],68:[2,61],69:[2,61],71:[2,61],73:[2,61],74:[2,61]},{5:[2,63],11:[2,63],13:[2,63],14:[2,63],16:[2,63],18:[2,63],21:[2,63],29:[2,63],30:[2,63],35:[2,63],36:[2,63],43:[2,63],46:[2,63],53:104,55:[2,63],57:[2,63],58:[1,105],59:[2,63],60:[2,63],61:[2,63],62:[2,63],63:[2,63],64:[2,63],68:[2,63],69:[2,63],71:[2,63],73:[2,63],74:[2,63]},{5:[2,57],11:[2,57],13:[2,57],14:[2,57],16:[2,57],18:[2,57],21:[2,57],29:[2,57],30:[2,57],35:[2,57],36:[2,57],43:[2,57],46:[2,57],55:[2,57],57:[2,57],58:[2,57],59:[2,57],60:[2,57],61:[2,57],62:[2,57],63:[2,57],64:[2,57],68:[2,57],69:[2,57],71:[2,57],73:[2,57],74:[2,57]},{5:[2,58],11:[2,58],13:[2,58],14:[2,58],16:[2,58],18:[2,58],21:[2,58],29:[2,58],30:[2,58],35:[2,58],36:[2,58],43:[2,58],46:[2,58],55:[2,58],57:[2,58],58:[2,58],59:[2,58],60:[2,58],61:[2,58],62:[2,58],63:[2,58],64:[2,58],68:[2,58],69:[2,58],71:[2,58],73:[2,58],74:[2,58]},{5:[2,59],11:[2,59],13:[2,59],14:[2,59],16:[2,59],18:[2,59],21:[2,59],29:[2,59],30:[2,59],35:[2,59],36:[2,59],43:[2,59],46:[2,59],55:[2,59],57:[2,59],58:[2,59],59:[2,59],60:[2,59],61:[2,59],62:[2,59],63:[2,59],64:[2,59],68:[2,59],69:[2,59],71:[2,59],73:[2,59],74:[2,59]},{5:[2,60],11:[2,60],13:[2,60],14:[2,60],16:[2,60],18:[2,60],21:[2,60],29:[2,60],30:[2,60],35:[2,60],36:[2,60],43:[2,60],46:[2,60],55:[2,60],57:[2,60],58:[2,60],59:[2,60],60:[2,60],61:[2,60],62:[2,60],63:[2,60],64:[2,60],68:[2,60],69:[2,60],71:[2,60],73:[2,60],74:[2,60]},{21:[1,107],35:[1,106],36:[1,108]},{35:[1,109],36:[1,110]},{23:[1,112],68:[1,111]},{23:[1,114],69:[1,113]},{23:[2,81],69:[2,81]},{71:[1,115]},{5:[2,84],11:[2,84],13:[2,84],14:[2,84],16:[2,84],18:[2,84],21:[2,84],29:[2,84],30:[2,84],35:[2,84],36:[2,84],43:[2,84],46:[2,84],55:[2,84],59:[2,84],60:[2,84],61:[2,84],62:[2,84],63:[2,84],64:[2,84],68:[2,84],69:[2,84],71:[2,84],73:[2,84],74:[2,84]},{73:[1,116]},{46:[1,117]},{48:[1,118]},{39:[2,94],46:[2,94],55:[2,94],57:[2,94],59:[2,94],60:[2,94],61:[2,94],62:[2,94],63:[2,94],64:[2,94],65:[2,94],66:[2,94],67:[2,94],76:119,79:[1,120]},{39:[2,88],46:[2,88],55:[2,88],57:[2,88],59:[2,88],60:[2,88],61:[2,88],62:[2,88],63:[2,88],64:[2,88],65:[2,88],66:[2,88],67:[2,88],73:[1,121],79:[2,88]},{39:[2,90],46:[2,90],55:[2,90],57:[2,90],59:[2,90],60:[2,90],61:[2,90],62:[2,90],63:[2,90],64:[2,90],65:[2,90],66:[2,90],67:[2,90],77:[1,122],79:[2,90]},{39:[2,92],46:[2,92],55:[2,92],57:[2,92],59:[2,92],60:[2,92],61:[2,92],62:[2,92],63:[2,92],64:[2,92],65:[2,92],66:[2,92],67:[2,92],79:[2,92]},{5:[2,18],11:[2,18],13:[2,18],14:[2,18],16:[2,18],18:[2,18],20:[2,18]},{5:[2,20],11:[2,20],13:[2,20],14:[2,20],16:[2,20],18:[2,20],23:[2,20]},{40:123,46:[1,124]},{36:[1,70],46:[1,71],47:72,49:125,74:[1,55]},{5:[2,77],11:[2,77],13:[2,77],14:[2,77],16:[2,77],18:[2,77],21:[2,77],29:[2,77],30:[2,77],35:[2,77],36:[2,77],38:126,43:[2,77],46:[2,77],55:[2,77],57:[1,64],59:[2,77],60:[2,77],61:[2,77],62:[2,77],63:[2,77],64:[2,77],65:[1,61],66:[1,62],67:[1,63],68:[2,77],69:[2,77],71:[2,77],73:[2,77],74:[2,77]},{25:127,37:36,45:67,46:[1,46],47:47,55:[1,53],59:[1,48],60:[1,49],61:[1,50],62:[1,51],63:[1,52],64:[1,54],74:[1,55]},{42:[1,98],44:[1,128]},{36:[2,61],51:129,57:[1,103]},{48:[1,130]},{5:[2,55],11:[2,55],13:[2,55],14:[2,55],16:[2,55],18:[2,55],21:[2,55],29:[2,55],30:[2,55],35:[2,55],36:[2,55],43:[2,55],46:[2,55],55:[2,55],59:[2,55],60:[2,55],61:[2,55],62:[2,55],63:[2,55],64:[2,55],68:[2,55],69:[2,55],71:[2,55],73:[2,55],74:[2,55]},{5:[2,62],11:[2,62],13:[2,62],14:[2,62],16:[2,62],18:[2,62],21:[2,62],29:[2,62],30:[2,62],35:[2,62],36:[2,62],43:[2,62],46:[2,62],55:[2,62],59:[2,62],60:[2,62],61:[2,62],62:[2,62],63:[2,62],64:[2,62],68:[2,62],69:[2,62],71:[2,62],73:[2,62],74:[2,62]},{5:[2,56],11:[2,56],13:[2,56],14:[2,56],16:[2,56],18:[2,56],21:[2,56],29:[2,56],30:[2,56],35:[2,56],36:[2,56],43:[2,56],46:[2,56],55:[2,56],57:[2,56],59:[2,56],60:[2,56],61:[2,56],62:[2,56],63:[2,56],64:[2,56],68:[2,56],69:[2,56],71:[2,56],73:[2,56],74:[2,56]},{5:[2,64],11:[2,64],13:[2,64],14:[2,64],16:[2,64],18:[2,64],21:[2,64],29:[2,64],30:[2,64],35:[2,64],36:[2,64],43:[2,64],46:[2,64],55:[2,64],57:[2,64],59:[2,64],60:[2,64],61:[2,64],62:[2,64],63:[2,64],64:[2,64],68:[2,64],69:[2,64],71:[2,64],73:[2,64],74:[2,64]},{5:[2,34],11:[2,34],13:[2,34],14:[2,34],16:[2,34],18:[2,34],21:[2,34],29:[2,34],30:[2,34],35:[2,34],36:[2,34],43:[2,34],46:[2,34],55:[2,34],59:[2,34],60:[2,34],61:[2,34],62:[2,34],63:[2,34],64:[2,34],68:[2,34],69:[2,34],71:[2,34],73:[2,34],74:[2,34]},{5:[2,35],11:[2,35],13:[2,35],14:[2,35],16:[2,35],18:[2,35],21:[2,35],29:[2,35],30:[2,35],35:[2,35],36:[2,35],43:[2,35],46:[2,35],55:[2,35],59:[2,35],60:[2,35],61:[2,35],62:[2,35],63:[2,35],64:[2,35],68:[2,35],69:[2,35],71:[2,35],73:[2,35],74:[2,35]},{5:[2,37],11:[2,37],13:[2,37],14:[2,37],16:[2,37],18:[2,37],21:[2,37],29:[2,37],30:[2,37],35:[2,37],36:[2,37],43:[2,37],46:[2,37],55:[2,37],59:[2,37],60:[2,37],61:[2,37],62:[2,37],63:[2,37],64:[2,37],68:[2,37],69:[2,37],71:[2,37],73:[2,37],74:[2,37]},{5:[2,36],11:[2,36],13:[2,36],14:[2,36],16:[2,36],18:[2,36],21:[2,36],29:[2,36],30:[2,36],35:[2,36],36:[2,36],43:[2,36],46:[2,36],55:[2,36],59:[2,36],60:[2,36],61:[2,36],62:[2,36],63:[2,36],64:[2,36],68:[2,36],69:[2,36],71:[2,36],73:[2,36],74:[2,36]},{5:[2,38],11:[2,38],13:[2,38],14:[2,38],16:[2,38],18:[2,38],21:[2,38],29:[2,38],30:[2,38],35:[2,38],36:[2,38],43:[2,38],46:[2,38],55:[2,38],59:[2,38],60:[2,38],61:[2,38],62:[2,38],63:[2,38],64:[2,38],68:[2,38],69:[2,38],71:[2,38],73:[2,38],74:[2,38]},{5:[2,78],11:[2,78],13:[2,78],14:[2,78],16:[2,78],18:[2,78],21:[2,78],29:[2,78],30:[2,78],35:[2,78],36:[2,78],43:[2,78],46:[2,78],55:[2,78],59:[2,78],60:[2,78],61:[2,78],62:[2,78],63:[2,78],64:[2,78],68:[2,78],69:[2,78],71:[2,78],73:[2,78],74:[2,78]},{46:[1,131]},{5:[2,80],11:[2,80],13:[2,80],14:[2,80],16:[2,80],18:[2,80],21:[2,80],29:[2,80],30:[2,80],35:[2,80],36:[2,80],43:[2,80],46:[2,80],55:[2,80],59:[2,80],60:[2,80],61:[2,80],62:[2,80],63:[2,80],64:[2,80],68:[2,80],69:[2,80],71:[2,80],73:[2,80],74:[2,80]},{20:[1,132]},{5:[2,83],11:[2,83],13:[2,83],14:[2,83],16:[2,83],18:[2,83],21:[2,83],29:[2,83],30:[2,83],35:[2,83],36:[2,83],43:[2,83],46:[2,83],55:[2,83],59:[2,83],60:[2,83],61:[2,83],62:[2,83],63:[2,83],64:[2,83],68:[2,83],69:[2,83],71:[2,83],73:[2,83],74:[2,83]},{5:[2,85],11:[2,85],13:[2,85],14:[2,85],16:[2,85],18:[2,85],21:[2,85],29:[2,85],30:[2,85],35:[2,85],36:[2,85],43:[2,85],46:[2,85],55:[2,85],59:[2,85],60:[2,85],61:[2,85],62:[2,85],63:[2,85],64:[2,85],68:[2,85],69:[2,85],71:[2,85],73:[2,85],74:[2,85]},{73:[1,133]},{46:[1,134]},{39:[2,87],46:[2,87],55:[2,87],57:[2,87],59:[2,87],60:[2,87],61:[2,87],62:[2,87],63:[2,87],64:[2,87],65:[2,87],66:[2,87],67:[2,87]},{39:[2,95],46:[2,95],55:[2,95],57:[2,95],59:[2,95],60:[2,95],61:[2,95],62:[2,95],63:[2,95],64:[2,95],65:[2,95],66:[2,95],67:[2,95]},{39:[2,89],46:[2,89],55:[2,89],57:[2,89],59:[2,89],60:[2,89],61:[2,89],62:[2,89],63:[2,89],64:[2,89],65:[2,89],66:[2,89],67:[2,89],79:[2,89]},{39:[2,91],46:[2,91],55:[2,91],57:[2,91],59:[2,91],60:[2,91],61:[2,91],62:[2,91],63:[2,91],64:[2,91],65:[2,91],66:[2,91],67:[2,91],79:[2,91]},{5:[2,39],11:[2,39],13:[2,39],14:[2,39],16:[2,39],18:[2,39],21:[2,39],29:[2,39],30:[2,39],35:[2,39],36:[2,39],42:[2,39],43:[2,39],44:[2,39],46:[2,39],55:[2,39],59:[2,39],60:[2,39],61:[2,39],62:[2,39],63:[2,39],64:[2,39],68:[2,39],69:[2,39],71:[2,39],73:[2,39],74:[2,39]},{5:[2,65],11:[2,65],13:[2,65],14:[2,65],16:[2,65],18:[2,65],21:[2,65],29:[2,65],30:[2,65],35:[2,65],36:[2,65],42:[2,65],43:[2,65],44:[2,65],46:[2,65],55:[2,65],59:[2,65],60:[2,65],61:[2,65],62:[2,65],63:[2,65],64:[2,65],68:[2,65],69:[2,65],71:[2,65],73:[2,65],74:[2,65]},{39:[2,48],55:[2,48],57:[2,48],59:[2,48],60:[2,48],61:[2,48],62:[2,48],63:[2,48],64:[2,48],65:[2,48],66:[2,48],67:[2,48]},{5:[2,42],11:[2,42],13:[2,42],14:[2,42],16:[2,42],18:[2,42],21:[2,42],29:[2,42],30:[2,42],35:[2,42],36:[2,42],43:[2,42],46:[2,42],55:[2,42],59:[2,42],60:[2,42],61:[2,42],62:[2,42],63:[2,42],64:[2,42],68:[2,42],69:[2,42],71:[2,42],73:[2,42],74:[2,42]},{42:[2,41],44:[2,41]},{5:[2,77],11:[2,77],13:[2,77],14:[2,77],16:[2,77],18:[2,77],21:[2,77],29:[2,77],30:[2,77],35:[2,77],36:[2,77],38:135,43:[2,77],46:[2,77],55:[2,77],57:[1,64],59:[2,77],60:[2,77],61:[2,77],62:[2,77],63:[2,77],64:[2,77],65:[1,61],66:[1,62],67:[1,63],68:[2,77],69:[2,77],71:[2,77],73:[2,77],74:[2,77]},{36:[1,136]},{46:[1,137]},{68:[1,138]},{23:[2,82],69:[2,82]},{5:[2,86],11:[2,86],13:[2,86],14:[2,86],16:[2,86],18:[2,86],21:[2,86],29:[2,86],30:[2,86],35:[2,86],36:[2,86],43:[2,86],46:[2,86],55:[2,86],59:[2,86],60:[2,86],61:[2,86],62:[2,86],63:[2,86],64:[2,86],68:[2,86],69:[2,86],71:[2,86],73:[2,86],74:[2,86]},{39:[2,46],55:[2,46],57:[2,46],59:[2,46],60:[2,46],61:[2,46],62:[2,46],63:[2,46],64:[2,46],65:[2,46],66:[2,46],67:[2,46]},{5:[2,43],11:[2,43],13:[2,43],14:[2,43],16:[2,43],18:[2,43],21:[2,43],29:[2,43],30:[2,43],35:[2,43],36:[2,43],43:[2,43],46:[2,43],55:[2,43],59:[2,43],60:[2,43],61:[2,43],62:[2,43],63:[2,43],64:[2,43],68:[2,43],69:[2,43],71:[2,43],73:[2,43],74:[2,43]},{46:[1,139],47:140,74:[1,55]},{39:[2,54],55:[2,54],57:[2,54],59:[2,54],60:[2,54],61:[2,54],62:[2,54],63:[2,54],64:[2,54],65:[2,54],66:[2,54],67:[2,54]},{5:[2,79],11:[2,79],13:[2,79],14:[2,79],16:[2,79],18:[2,79],21:[2,79],29:[2,79],30:[2,79],35:[2,79],36:[2,79],43:[2,79],46:[2,79],55:[2,79],59:[2,79],60:[2,79],61:[2,79],62:[2,79],63:[2,79],64:[2,79],68:[2,79],69:[2,79],71:[2,79],73:[2,79],74:[2,79]},{39:[2,49],55:[2,49],57:[2,49],59:[2,49],60:[2,49],61:[2,49],62:[2,49],63:[2,49],64:[2,49],65:[2,49],66:[2,49],67:[2,49]},{39:[2,51],46:[1,141],55:[2,51],57:[2,51],59:[2,51],60:[2,51],61:[2,51],62:[2,51],63:[2,51],64:[2,51],65:[2,51],66:[2,51],67:[2,51]},{48:[1,142]},{46:[1,143]},{39:[2,52],55:[2,52],57:[2,52],59:[2,52],60:[2,52],61:[2,52],62:[2,52],63:[2,52],64:[2,52],65:[2,52],66:[2,52],67:[2,52]}],defaultActions:{9:[2,1]},parseError:function(t,e){if(!e.recoverable)throw new Error(t);this.trace(t)},parse:function(t){function e(){var t;return t=s.lexer.lex()||_,"number"!=typeof t&&(t=s.symbols_[t]||t),t}var s=this,i=[0],n=[null],r=[],a=this.table,c="",h=0,o=0,l=0,u=2,_=1,y=r.slice.call(arguments,1);this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var b=this.lexer.yylloc;r.push(b);var p=this.lexer.options&&this.lexer.options.ranges;this.parseError="function"==typeof this.yy.parseError?this.yy.parseError:Object.getPrototypeOf(this).parseError;for(var f,m,k,g,d,$,x,v,S,E={};;){if(k=i[i.length-1],this.defaultActions[k]?g=this.defaultActions[k]:((null===f||"undefined"==typeof f)&&(f=e()),g=a[k]&&a[k][f]),"undefined"==typeof g||!g.length||!g[0]){var I="";S=[];for($ in a[k])this.terminals_[$]&&$>u&&S.push("'"+this.terminals_[$]+"'");I=this.lexer.showPosition?"Parse error on line "+(h+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+S.join(", ")+", got '"+(this.terminals_[f]||f)+"'":"Parse error on line "+(h+1)+": Unexpected "+(f==_?"end of input":"'"+(this.terminals_[f]||f)+"'"),this.parseError(I,{text:this.lexer.match,token:this.terminals_[f]||f,line:this.lexer.yylineno,loc:b,expected:S})}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+k+", token: "+f);switch(g[0]){case 1:i.push(f),n.push(this.lexer.yytext),r.push(this.lexer.yylloc),i.push(g[1]),f=null,m?(f=m,m=null):(o=this.lexer.yyleng,c=this.lexer.yytext,h=this.lexer.yylineno,b=this.lexer.yylloc,l>0&&l--);break;case 2:if(x=this.productions_[g[1]][1],E.$=n[n.length-x],E._$={first_line:r[r.length-(x||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(x||1)].first_column,last_column:r[r.length-1].last_column},p&&(E._$.range=[r[r.length-(x||1)].range[0],r[r.length-1].range[1]]),d=this.performAction.apply(E,[c,o,h,this.yy,g[1],n,r].concat(y)),"undefined"!=typeof d)return d;x&&(i=i.slice(0,-1*x*2),n=n.slice(0,-1*x),r=r.slice(0,-1*x)),i.push(this.productions_[g[1]][0]),n.push(E.$),r.push(E._$),v=a[i[i.length-2]][i[i.length-1]],i.push(v);break;case 3:return!0}}return!0}};Vex.L("Starting parser.");var s=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,s=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),s.length-1&&(this.yylineno-=s.length-1);var n=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:s?(s.length===i.length?this.yylloc.first_column:0)+i[i.length-s.length].length-s[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var s,i,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),i=t[0].match(/(?:\r\n?|\n).*/g),i&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],s=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),s)return s;if(this._backtrack){for(var r in n)this[r]=n[r];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,s,i;this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),r=0;r<n.length;r++)if(s=this._input.match(this.rules[n[r]]),s&&(!e||s[0].length>e[0].length)){if(e=s,i=r,this.options.backtrack_lexer){if(t=this.test_match(s,n[r]),t!==!1)return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?(t=this.test_match(e,n[i]),t!==!1?t:!1):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){var t=this.conditionStack.length-1;return t>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,s,i){switch(s){case 0:return this.begin("notes"),18;case 1:return this.begin("options"),13;case 2:return this.begin("options"),"STAVE";case 3:return this.begin("options"),14;case 4:return this.begin("options"),11;case 5:return this.begin("text"),16;case 6:return 20;case 7:return this.begin("annotations"),"$";case 8:return this.begin("notes"),"$";case 9:return 20;case 10:return this.begin("command"),"!";case 11:return this.begin("notes"),"!";case 12:return 72;case 13:return 22;case 14:return 39;case 15:return"+";case 16:return 36;case 17:return 21;case 18:return 43;case 19:return 44;case 20:return 29;case 21:return 30;case 22:return 68;case 23:return 23;case 24:return 35;case 25:return 42;case 26:return 73;case 27:return 77;case 28:return 63;case 29:return 60;case 30:return 55;case 31:return 64;case 32:return 61;case 33:return 62;case 34:return 59;case 35:return 48;case 36:return 65;case 37:return 66;case 38:return 67;case 39:return 57;case 40:return 46;case 41:return 56;case 42:return 54;case 43:return 55;case 44:return 57;case 45:return 58;case 46:return 74;case 47:return 78;case 48:return 79;case 49:this.begin("INITIAL");break;case 50:break;case 51:return 5;case 52:return"INVALID"}},rules:[/^(?:notes\b)/,/^(?:tabstave\b)/,/^(?:stave\b)/,/^(?:voice\b)/,/^(?:options\b)/,/^(?:text\b)/,/^(?:[^\s=]+)/,/^(?:[$])/,/^(?:[$])/,/^(?:[^,$]+)/,/^(?:[!])/,/^(?:[!])/,/^(?:[^!]+)/,/^(?:[^,\r\n]+)/,/^(?:\/)/,/^(?:\+)/,/^(?::)/,/^(?:=)/,/^(?:\()/,/^(?:\))/,/^(?:\[)/,/^(?:\])/,/^(?:\^)/,/^(?:,)/,/^(?:\|)/,/^(?:\.)/,/^(?:#)/,/^(?:@)/,/^(?:[b])/,/^(?:[s])/,/^(?:[h])/,/^(?:[p])/,/^(?:[t])/,/^(?:[T])/,/^(?:[-])/,/^(?:[_])/,/^(?:[v])/,/^(?:[V])/,/^(?:[u])/,/^(?:[d])/,/^(?:[0-9]+)/,/^(?:[q])/,/^(?:[w])/,/^(?:[h])/,/^(?:[d])/,/^(?:[S])/,/^(?:[A-GX])/,/^(?:[n])/,/^(?:[~])/,/^(?:[\r\n]+)/,/^(?:\s+)/,/^(?:$)/,/^(?:.)/],conditions:{notes:{rules:[7,10,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52],inclusive:!0},text:{rules:[13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,40,41,42,43,44,49,50,51,52],inclusive:!0},annotations:{rules:[8,9,14,15,16,17,18,19,20,21,22,23,24,25,26,27,49,50,51,52],inclusive:!0},options:{rules:[6,14,15,16,17,18,19,20,21,22,23,24,25,26,27,49,50,51,52],inclusive:!0},command:{rules:[11,12,14,15,16,17,18,19,20,21,22,23,24,25,26,27,49,50,51,52],inclusive:!0},INITIAL:{rules:[0,1,2,3,4,5,6,14,15,16,17,18,19,20,21,22,23,24,25,26,27,49,50,51,52],inclusive:!0}}};
return t}();return e.lexer=s,t.prototype=e,e.Parser=t,new t}();"undefined"!=typeof require&&"undefined"!=typeof exports&&(exports.parser=vextab_parser,exports.Parser=vextab_parser.Parser,exports.parse=function(){return vextab_parser.parse.apply(vextab_parser,arguments)},exports.main=function(t){t[1]||(console.log("Usage: "+t[0]+" FILE"),process.exit(1));var e=require("fs").readFileSync(require("path").normalize(t[1]),"utf8");return exports.parser.parse(e)},"undefined"!=typeof module&&require.main===module&&exports.main(process.argv.slice(1)));/**
 * VexFlow TabDiv
 * Copyright Mohit Muthanna 2010 <mohit@muthanna.com>
 */
Vex.Flow.TabDiv=function(t,e){arguments.length>0&&this.init(t,e)},Vex.Flow.TabDiv.SEL=".vex-tabdiv",Vex.Flow.TabDiv.ERROR_NOCANVAS="<b>This browser does not support HTML5 Canvas</b><br/>Please use a modern browser such as <a href='http://google.com/chrome'>Google Chrome</a> or <a href='http://firefox.com'>Firefox</a>.",Vex.Flow.TabDiv.prototype.init=function(t,e){this.sel=t,this.code=$(t).text(),$(t).empty(),"static"==$(t).css("position")&&$(t).css("position","relative"),this.width=$(t).attr("width")||400,this.height=$(t).attr("height")||200,this.scale=$(t).attr("scale")||1,"undefined"==typeof Raphael?(this.canvas=$("<canvas></canvas>").addClass("vex-canvas"),$(t).append(this.canvas),this.renderer=new Vex.Flow.Renderer(this.canvas[0],Vex.Flow.Renderer.Backends.CANVAS)):(this.canvas=$("<div></div>").addClass("vex-canvas"),$(t).append(this.canvas),this.renderer=new Vex.Flow.Renderer(this.canvas[0],Vex.Flow.Renderer.Backends.RAPHAEL)),this.ctx_sel=$(t).find(".vex-canvas"),this.renderer.resize(this.width,this.height),this.ctx=this.renderer.getContext(),this.ctx.setBackgroundFillStyle(this.ctx_sel.css("background-color")),this.ctx.scale(this.scale,this.scale),this.editor=$(t).attr("editor")||"",this.show_errors=$(t).attr("show-errors")||"",this.editor_width=$(t).attr("editor_width")||this.width,this.editor_height=$(t).attr("editor_height")||200;var r=this;"true"==this.editor&&(this.text_area=$("<textarea></textarea>").addClass("editor").val(this.code),this.editor_error=$("<div></div>").addClass("editor-error"),$(t).append($("<p/>")).append(this.editor_error),$(t).append($("<p/>")).append(this.text_area),this.text_area.width(this.editor_width),this.text_area.height(this.editor_height),this.text_area.keyup(function(){r.timeoutID&&window.clearTimeout(r.timeoutID),r.timeoutID=window.setTimeout(function(){r.code!=r.text_area.val()&&(r.code=r.text_area.val(),r.redraw())},250)})),"true"==this.show_errors&&(this.editor_error=$("<div></div>").addClass("editor-error"),$(t).append($("<p/>")).append(this.editor_error)),this.artist=new Vex.Flow.Artist(10,0,this.width,{scale:this.scale}),this.parser=new Vex.Flow.VexTab(this.artist),Vex.Flow.Player&&(opts={},e&&(opts.soundfont_url=e.soundfont_url),this.player=new Vex.Flow.Player(this.artist,opts)),this.redraw()},Vex.Flow.TabDiv.prototype.redraw=function(){var t=this;return Vex.BM("Total render time: ",function(){t.parse(),t.draw()}),this},Vex.Flow.TabDiv.prototype.drawInternal=function(){return this.parser.isValid()?this.artist.draw(this.renderer):this},Vex.Flow.TabDiv.prototype.parseInternal=function(){try{this.artist.reset(),this.parser.reset(),this.parser.parse(this.code),this.editor_error.empty()}catch(t){this.editor_error&&(this.editor_error.empty(),this.editor_error.append($("<div></div>").addClass("text").html("Sucky VexTab: "+t.message)))}return this},Vex.Flow.TabDiv.prototype.parse=function(){var t=this;return Vex.BM("Parse time: ",function(){t.parseInternal()}),this},Vex.Flow.TabDiv.prototype.draw=function(){var t=this;return Vex.BM("Draw time: ",function(){t.drawInternal()}),this},Vex.Flow.TabDiv.start=function(){$(Vex.Flow.TabDiv.SEL).each(function(){new Vex.Flow.TabDiv(this)})},$(function(){Vex.Flow.TabDiv.SEL&&Vex.Flow.TabDiv.start()});(function(){var t=[].slice,e=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};Vex.Flow.Artist=function(){function n(t,e,n,i){this.x=t,this.y=e,this.width=n,this.options={font_face:"Arial",font_size:10,font_style:null,bottom_spacing:20+(Vex.Flow.Artist.NOLOGO?0:10),tab_stave_lower_spacing:10,note_stave_lower_spacing:0,scale:1},null!=i&&_.extend(this.options,i),this.reset()}var i,s,o,a,r,l,u;return n.DEBUG=!1,i=function(){var e;return e=1<=arguments.length?t.call(arguments,0):[],Vex.Flow.Artist.DEBUG?"undefined"!=typeof console&&null!==console?console.log.apply(console,["(Vex.Flow.Artist)"].concat(t.call(e))):void 0:void 0},n.NOLOGO=!1,n.prototype.reset=function(){return this.tuning=new Vex.Flow.Tuning,this.key_manager=new Vex.Flow.KeyManager("C"),this.music_api=new Vex.Flow.Music,this.customizations={"font-size":this.options.font_size,"font-face":this.options.font_face,"font-style":this.options.font_style,"annotation-position":"bottom",scale:this.options.scale,width:this.width,"stave-distance":0,space:0,player:"false",tempo:120,instrument:"acoustic_grand_piano",accidentals:"standard"},this.staves=[],this.tab_articulations=[],this.stave_articulations=[],this.player_voices=[],this.last_y=this.y,this.current_duration="q",this.current_clef="treble",this.current_bends={},this.current_octave_shift=0,this.bend_start_index=null,this.bend_start_strings=null,this.rendered=!1,this.renderer_context=null},n.prototype.attachPlayer=function(t){return this.player=t},n.prototype.setOptions=function(t){var n,s,o;i("setOptions: ",t),o=_.keys(this.customizations);for(n in t){if(s=t[n],!(e.call(o,n)>=0))throw new Vex.RERR("ArtistError","Invalid option '"+n+"'");this.customizations[n]=s}return this.last_y+=parseInt(this.customizations.space,10),"true"===this.customizations.player?this.last_y+=15:void 0},n.prototype.getPlayerData=function(){return{voices:this.player_voices,context:this.renderer_context,scale:this.customizations.scale}},s=function(t,e,n,i){var s,o,a,r,l,u,c,h,d,p,f,v,w,m,g,y,x,b,V,F,T,E,A,k;if(null!=e&&(v=e.stave),null!=n&&(d=n.stave),w=[],p=[],g=[],o=[],a=null,m=null,null!=e){for(A=e.voices,x=0,F=A.length;F>x;x++)h=A[x],_.isEmpty(h)||(_.each(h,function(t){return t.setStave(v)}),y=new Vex.Flow.Voice(Vex.Flow.TIME4_4).setMode(Vex.Flow.Voice.Mode.SOFT),y.addTickables(h),w.push(y));a=v,m=v}if(null!=n){for(c=n.voices.length>1?!0:!1,k=n.voices,u=b=0,T=k.length;T>b;u=++b)h=k[u],_.isEmpty(h)||(f=0===u?1:-1,_.each(h,function(t){return t.setStave(d)}),y=new Vex.Flow.Voice(Vex.Flow.TIME4_4).setMode(Vex.Flow.Voice.Mode.SOFT),y.addTickables(h),p.push(y),o=c?o.concat(Vex.Flow.Beam.applyAndGetBeams(y,f)):Vex.Flow.Beam.applyAndGetBeams(y));a=d,m=d}for(V=0,E=i.length;E>V;V++)h=i[V],_.isEmpty(h)||(_.each(h,function(t){return t.setStave(m)}),y=new Vex.Flow.Voice(Vex.Flow.TIME4_4).setMode(Vex.Flow.Voice.Mode.SOFT),y.addTickables(h),g.push(y));return null!=a?(r=[],l=new Vex.Flow.Formatter,s=!1,null!=e&&(_.isEmpty(w)||l.joinVoices(w),r=w),null!=n&&(_.isEmpty(p)||l.joinVoices(p),r=r.concat(p),p.length>1&&(s=!0)),_.isEmpty(i)||_.isEmpty(g)||(l.joinVoices(g),r=r.concat(g)),_.isEmpty(r)||l.formatToStave(r,a,{align_rests:s}),null!=e&&_.each(w,function(e){return e.draw(t,v)}),null!=n&&_.each(p,function(e){return e.draw(t,d)}),null!=n&&_.each(o,function(e){return e.setContext(t).draw()}),_.isEmpty(i)||_.each(g,function(e){return e.draw(t,m)}),null!=e&&null!=n&&new Vex.Flow.StaveConnector(n.stave,e.stave).setContext(t).draw(),null!=n?p:w):void 0},n.prototype.render=function(t){var e,n,o,a,r,l,u,c,h,d,p,f,v,w,m,g;for(i("Render: ",this.options),this.closeBends(),t.resize(this.customizations.width*this.customizations.scale,(this.last_y+this.options.bottom_spacing)*this.customizations.scale),o=t.getContext(),o.scale(this.customizations.scale,this.customizations.scale),o.clear(),o.setFont(this.options.font_face,this.options.font_size,""),this.renderer_context=o,a=function(t,e){var n;return n=_.last(e),n instanceof Vex.Flow.BarNote?(e.pop(),t.setEndBarType(n.getType())):void 0},w=this.staves,c=0,p=w.length;p>c;c++)r=w[c],i("Rendering staves."),null!=r.tab&&a(r.tab,r.tab_notes),null!=r.note&&a(r.note,r.note_notes),null!=r.tab&&r.tab.setContext(o).draw(),null!=r.note&&r.note.setContext(o).draw(),r.tab_voices.push(r.tab_notes),r.note_voices.push(r.note_notes),l=s(o,null!=r.tab?{stave:r.tab,voices:r.tab_voices}:null,null!=r.note?{stave:r.note,voices:r.note_voices}:null,r.text_voices),this.player_voices.push(l);for(i("Rendering tab articulations."),m=this.tab_articulations,h=0,f=m.length;f>h;h++)n=m[h],n.setContext(o).draw();for(i("Rendering note articulations."),g=this.stave_articulations,d=0,v=g.length;v>d;d++)n=g[d],n.setContext(o).draw();return null!=this.player&&("true"===this.customizations.player?(this.player.setTempo(parseInt(this.customizations.tempo,10)),this.player.setInstrument(this.customizations.instrument),this.player.render()):this.player.removeControls()),this.rendered=!0,Vex.Flow.Artist.NOLOGO?void 0:(e="vexflow.com",u=o.measureText(e).width,o.save(),o.setFont("Times",10,"italic"),o.fillText(e,(this.customizations.width-u)/2,this.last_y+25),o.restore())},n.prototype.isRendered=function(){return this.rendered},n.prototype.draw=function(t){return this.render(t)},n.prototype.getNoteForFret=function(t,e){var n,i,s,o,a,r,l,u;switch(l=this.tuning.getNoteForFret(t,e),u=Vex.Flow.keyProperties(l),r=this.key_manager.selectNote(u.key),n=null,this.customizations.accidentals){case"standard":r.change&&(n=null!=r.accidental?r.accidental:"n");break;case"cautionary":n=r.change?null!=r.accidental?r.accidental:"n":null!=r.accidental?r.accidental+"_c":void 0;break;default:throw new Vex.RERR("ArtistError","Invalid value for option 'accidentals': "+this.customizations.accidentals)}return i=r.note,s=u.octave,a=this.music_api.getNoteParts(u.key).root,o=this.music_api.getNoteParts(r.note).root,"b"===o&&"c"===a?s--:"c"===o&&"b"===a&&s++,[i,s,n]},n.prototype.getNoteForABC=function(t,e){var n,i,s;return i=t.key,s=e,n=t.accidental,null!=t.accidental_type&&(n+="_"+t.accidental_type),[i,s,n]},n.prototype.addStaveNote=function(t){var e,n,i,s,o,a,r,l,u,c;for(s={is_rest:!1,play_note:null},_.extend(s,t),r=_.last(this.staves).note_notes,a=new Vex.Flow.StaveNote({keys:s.spec,duration:this.current_duration+(s.is_rest?"r":""),clef:s.is_rest?"treble":this.current_clef,auto_stem:s.is_rest?!1:!0}),c=s.accidentals,n=l=0,u=c.length;u>l;n=++l)e=c[n],null!=e&&(o=e.split("_"),i=new Vex.Flow.Accidental(o[0]),o.length>1&&"c"===o[1]&&i.setAsCautionary(),a.addAccidental(n,i));return"d"===this.current_duration[this.current_duration.length-1]&&a.addDotToAll(),null!=s.play_note&&a.setPlayNote(s.play_note),r.push(a)},n.prototype.addTabNote=function(t,e){var n,i;return null==e&&(e=null),i=_.last(this.staves).tab_notes,n=new Vex.Flow.TabNote({positions:t,duration:this.current_duration}),null!=e&&n.setPlayNote(e),i.push(n)},u=function(t,e){return t+(e?"d":"")},n.prototype.setDuration=function(t,e){var n;return null==e&&(e=!1),n=t.split(/\s+/),i("setDuration: ",n[0],e),this.current_duration=u(n[0],e)},n.prototype.addBar=function(t){var e,n,s;return i("addBar: ",t),this.closeBends(),this.key_manager.reset(),s=_.last(this.staves),e=Vex.Flow.Barline.type,t=function(){switch(t){case"single":return e.SINGLE;case"double":return e.DOUBLE;case"end":return e.END;case"repeat-begin":return e.REPEAT_BEGIN;case"repeat-end":return e.REPEAT_END;case"repeat-both":return e.REPEAT_BOTH;default:return e.SINGLE}}(),n=(new Vex.Flow.BarNote).setType(t),s.tab_notes.push(n),null!=s.note?s.note_notes.push(n):void 0},l=function(t,e){var n,i;return n=Vex.Flow.Bend.UP,i="",t>e?n=Vex.Flow.Bend.DOWN:i=function(){switch(Math.abs(e-t)){case 1:return"1/2";case 2:return"Full";case 3:return"1 1/2";default:return"Bend to "+e}}(),{type:n,text:i}},n.prototype.openBends=function(t,e,n,s){var o,a,r,u,c,h,d,p,f,v,w,m,g,y;for(i("openBends",t,e,n,s),f=_.last(this.staves).tab_notes,p=t,d=n,_.isEmpty(this.current_bends)?(this.bend_start_index=f.length-2,this.bend_start_strings=n):(p=f[this.bend_start_index],d=this.bend_start_strings),o=p.getPositions(),c=e.getPositions(),y=[],r=m=0,g=d.length;g>m;r=++m)u=d[r],h=s[r],a=t.getPositions()[n[r]],v=c[h],null==(w=this.current_bends)[u]&&(w[u]=[]),y.push(this.current_bends[u].push(l(a.fret,v.fret)));return y},n.prototype.closeBends=function(t){var e,n,s,o,a,r,l,u,c,h,d,p;if(null==t&&(t=1),null!=this.bend_start_index){i("closeBends("+t+")"),a=_.last(this.staves).tab_notes,d=this.current_bends;for(n in d){for(r=d[n],s=[],l=0,c=r.length;c>l;l++)e=r[l],s.push(e);a[this.bend_start_index].addModifier(new Vex.Flow.Bend(null,null,s),n)}for(p=a.slice(this.bend_start_index+1,+(a.length-2+t)+1||9e9),u=0,h=p.length;h>u;u++)o=p[u],o.setGhost(!0);return this.current_bends={},this.bend_start_index=null}},n.prototype.makeTuplets=function(t,e){var n,s,o;if(i("makeTuplets",t,e),null==e&&(e=t),_.last(this.staves).note){if(s=_.last(this.staves).note_notes,o=_.last(this.staves).tab_notes,s.length<e)throw new Vex.RERR("ArtistError","Not enough notes for tuplet");return n=new Vex.Flow.Tuplet(s.slice(s.length-e),{num_notes:t}),this.stave_articulations.push(n),new Vex.Flow.Tuplet(o.slice(o.length-e),{num_notes:t})}},o=function(t){return t.match(/^\.fingering\/([^.]+)\./)},n.prototype.makeFingering=function(t){var e,n,i,s,a,r,l,u,c,h,d,_,p,f;if(h=o(t),e=Vex.Flow.Modifier.Position,a=[],s=[],null==h)return null;for(a=function(){var t,e,n,i;for(n=h[1].split(/-/),i=[],t=0,e=n.length;e>t;t++)c=n[t],i.push(c.trim());return i}(),n=function(){return new Vex.RERR("ArtistError","Bad fingering: "+h[1])},p=0,f=a.length;f>p;p++){if(i=a[p],d=i.match(/(\d+):([ablr]):([fs]):([^-.]+)/),null==d)throw n();switch(l=parseInt(d[1],10)-1,_=e.RIGHT,d[2]){case"l":_=e.LEFT;break;case"r":_=e.RIGHT;break;case"a":_=e.ABOVE;break;case"b":_=e.BELOW}switch(r=null,u=d[4],d[3]){case"s":r=new Vex.Flow.StringNumber(u).setPosition(_);break;case"f":r=new Vex.Flow.FretHandFinger(u).setPosition(_)}s.push({num:l,modifier:r})}return s},r=function(t){return t.match(/^\.stroke\/([^.]+)\./)},n.prototype.makeStroke=function(t){var e,n,i;if(n=r(t),e=Vex.Flow.Stroke.Type,i=null,null!=n){switch(n[1]){case"bu":i=e.BRUSH_UP;break;case"bd":i=e.BRUSH_DOWN;break;case"ru":i=e.ROLL_UP;break;case"rd":i=e.ROLL_DOWN;break;case"qu":i=e.RASQUEDO_UP;break;case"qd":i=e.RASQUEDO_DOWN;break;default:throw new Vex.RERR("ArtistError","Invalid stroke type: "+n[1])}return new Vex.Flow.Stroke(i)}return null},a=function(t){return t.match(/^\.(a[^\/]*)\/(t|b)[^.]*\./)},n.prototype.makeScoreArticulation=function(t){var e,n,i,s,o;return n=a(t),null!=n?(o=n[1],s=n[2],e=Vex.Flow.Modifier.Position,i="t"===s?e.ABOVE:e.BELOW,new Vex.Flow.Articulation(o).setPosition(i)):null},n.prototype.makeAnnotation=function(t){var e,n,i,s,o,a,r,l,u;if(s=this.customizations["font-face"],o=this.customizations["font-size"],a=this.customizations["font-style"],n=this.customizations["annotation-position"],e=Vex.Flow.Annotation.VerticalJustify,i="top"===n?e.TOP:e.BOTTOM,l=function(t,e){return null==e&&(e=i),new Vex.Flow.Annotation(t).setFont(s,o,a).setVerticalJustification(e)},u=t.match(/^\.([^-]*)-([^-]*)-([^.]*)\.(.*)/),null!=u)return s=u[1],o=u[2],a=u[3],t=u[4],t?l(t):null;if(u=t.match(/^\.([^.]*)\.(.*)/),null!=u){switch(r=i,t=u[2],u[1]){case"big":a="bold",o="14";break;case"italic":case"italics":s="Times",a="italic";break;case"medium":o="12";break;case"top":r=e.TOP,this.customizations["annotation-position"]="top";break;case"bottom":r=e.BOTTOM,this.customizations["annotation-position"]="bottom"}return t?l(t,r):null}return l(t)},n.prototype.addAnnotations=function(t){var e,n,i,s,o,l,u,c,h,d,p,f,v,w,m,g,y,x,b,V,F,T;if(c=_.last(this.staves),h=c.note_notes,f=c.tab_notes,t.length>f.length)throw new Vex.RERR("ArtistError","More annotations than note elements");if(c.tab)for(b=f.slice(f.length-t.length),o=v=0,g=b.length;g>v;o=++v)p=b[o],a(t[o])?(u=this.makeScoreArticulation(t[o]),p.addModifier(u,0)):r(t[o])?(d=this.makeStroke(t[o]),p.addModifier(d,0)):(e=this.makeAnnotation(t[o]),e&&p.addModifier(this.makeAnnotation(t[o]),0));else for(V=h.slice(h.length-t.length),o=w=0,y=V.length;y>w;o=++w)l=V[o],a(t[o])||(e=this.makeAnnotation(t[o]),e&&l.addAnnotation(0,this.makeAnnotation(t[o])));if(c.note){for(F=h.slice(h.length-t.length),T=[],o=m=0,x=F.length;x>m;o=++m)if(l=F[o],u=this.makeScoreArticulation(t[o]),null!=u&&l.addArticulation(0,u),d=this.makeStroke(t[o]),null!=d&&l.addStroke(0,d),s=this.makeFingering(t[o]),null!=s)try{T.push(function(){var t,e,n;for(n=[],t=0,e=s.length;e>t;t++)i=s[t],n.push(l.addModifier(i.num,i.modifier));return n}())}catch(E){throw n=E,new Vex.RERR("ArtistError","Bad note number in fingering: "+t[o])}else T.push(void 0);return T}},n.prototype.addTabArticulation=function(t,e,n,s,o){var a;return i("addTabArticulations: ",t,e,n,s,o),"t"===t&&n.addModifier(new Vex.Flow.Annotation("T").setVerticalJustification(Vex.Flow.Annotation.VerticalJustify.BOTTOM)),_.isEmpty(s)&&_.isEmpty(o)?void 0:(a=null,"s"===t&&(a=new Vex.Flow.TabSlide({first_note:e,last_note:n,first_indices:s,last_indices:o})),("h"===t||"p"===t)&&(a=new Vex.Flow.TabTie({first_note:e,last_note:n,first_indices:s,last_indices:o},t.toUpperCase())),("T"===t||"t"===t)&&(a=new Vex.Flow.TabTie({first_note:e,last_note:n,first_indices:s,last_indices:o}," ")),"b"===t&&this.openBends(e,n,s,o),null!=a?this.tab_articulations.push(a):void 0)},n.prototype.addStaveArticulation=function(t,e,n,s,o){var a;return i("addStaveArticulations: ",t,e,n,s,o),a=null,("b"===t||"s"===t||"h"===t||"p"===t||"t"===t||"T"===t)&&(a=new Vex.Flow.StaveTie({first_note:e,last_note:n,first_indices:s,last_indices:o})),null!=a?this.stave_articulations.push(a):void 0},n.prototype.getPreviousNoteIndex=function(){var t,e,n;for(n=_.last(this.staves).tab_notes,t=2;t<=n.length;){if(e=n[n.length-t],e instanceof Vex.Flow.TabNote)return n.length-t;t++}return-1},n.prototype.addDecorator=function(t){var e,n,s,o,a,r;return i("addDecorator: ",t),null!=t?(o=_.last(this.staves),a=o.tab_notes,s=o.note_notes,e=null,n=null,"v"===t&&(e=new Vex.Flow.Vibrato),"V"===t&&(e=(new Vex.Flow.Vibrato).setHarsh(!0)),"u"===t&&(e=new Vex.Flow.Articulation("a|").setPosition(Vex.Flow.Modifier.Position.BOTTOM),n=new Vex.Flow.Articulation("a|").setPosition(Vex.Flow.Modifier.Position.BOTTOM)),"d"===t&&(e=new Vex.Flow.Articulation("am").setPosition(Vex.Flow.Modifier.Position.BOTTOM),n=new Vex.Flow.Articulation("am").setPosition(Vex.Flow.Modifier.Position.BOTTOM)),null!=e&&_.last(a).addModifier(e,0),null!=n?null!=(r=_.last(s))?r.addArticulation(0,n):void 0:void 0):void 0},n.prototype.addArticulations=function(t){var n,s,o,a,r,l,u,c,h,d,p,f,v,w,m,g,y,x,b,V;if(i("addArticulations: ",t),f=_.last(this.staves),w=f.tab_notes,v=f.note_notes,_.isEmpty(w)||_.isEmpty(t))return this.closeBends(0),void 0;for(o=_.last(w),a=!1,V=["b","s","h","p","t","T","v","V"],x=0,b=V.length;b>x;x++)g=V[x],l=function(){var e,i,s;for(s=[],r=e=0,i=t.length;i>e;r=++e)n=t[r],null!=n&&n===g&&s.push(r);return s}(),_.isEmpty(l)||("b"===g&&(a=!0),h=this.getPreviousNoteIndex(),-1===h?(p=null,d=null):(p=w[h],m=function(){var t,n,i,s;for(i=o.getPositions(),s=[],r=t=0,n=i.length;n>t;r=++t)u=i[r],e.call(l,r)>=0&&s.push(u.str);return s}(),y=function(){var t,n,i,s,o;for(i=p.getPositions(),o=[],r=t=0,n=i.length;n>t;r=++t)c=i[r],s=c.str,e.call(m,s)>=0&&o.push(c.str);return o}(),d=function(){var t,n,i,s,o;for(i=p.getPositions(),o=[],r=t=0,n=i.length;n>t;r=++t)u=i[r],s=u.str,e.call(y,s)>=0&&o.push(r);return o}(),s=function(){var t,n,i,s,a;for(i=o.getPositions(),a=[],r=t=0,n=i.length;n>t;r=++t)u=i[r],s=u.str,e.call(y,s)>=0&&a.push(r);return a}()),null!=f.tab&&this.addTabArticulation(g,p,o,d,s),null!=f.note&&this.addStaveArticulation(g,v[h],_.last(v),d,s));return a?void 0:this.closeBends(0)},n.prototype.addRest=function(t){var e,n;return i("addRest: ",t),this.closeBends(),0===t.position?this.addStaveNote({spec:["r/4"],accidentals:[],is_rest:!0}):(e=this.tuning.getNoteForFret(2*(parseInt(t.position,10)+5),6),this.addStaveNote({spec:[e],accidentals:[],is_rest:!0})),n=_.last(this.staves).tab_notes,n.push(new Vex.Flow.GhostNote(this.current_duration))},n.prototype.addChord=function(t,e,n){var s,o,a,r,l,u,c,h,d,p,f,v,w,m,g,y,x,b,V,F,T,E,A,k,N,R,B,O,S,z,P,M,C;if(!_.isEmpty(t)){for(i("addChord: ",t),k=_.last(this.staves),A=[],V=[],a=[],l=[],d=[],N=[],p=[],y=0,h=_.first(t).string,c=0,R=0,S=t.length;S>R;R++){if(m=t[R],y++,(null!=m.abc||m.string!==h)&&(c=0,h=m.string),null==A[c]&&(A[c]=[],V[c]=[],a[c]=[],N[c]=[],l[c]=[],d[c]=[]),P=[null,null,null],v=P[0],w=P[1],o=P[2],b=null,null!=m.abc)x=null!=m.octave?m.octave:m.string,M=this.getNoteForABC(m.abc,x),v=M[0],w=M[1],o=M[2],s=null!=o?o.split("_")[0]:"",b=""+v+s,null==m.fret&&(m.fret="X");else{if(null==m.fret)throw new Vex.RERR("ArtistError","No note specified");C=this.getNoteForFret(m.fret,m.string),v=C[0],w=C[1],o=C[2],b=this.tuning.getNoteForFret(m.fret,m.string).split("/")[0]}F=parseInt(w,10)+this.current_octave_shift,u=null!=m.time?{time:m.time,dot:m.dot}:null,A[c].push(""+v+"/"+w),V[c].push(""+b+"/"+F),a[c].push(o),N[c].push({fret:m.fret,str:m.string}),null!=m.articulation&&l[c].push(m.articulation),p[c]=u,null!=m.decorator&&(d[c]=m.decorator),c++}for(f=B=0,z=A.length;z>B;f=++B)E=A[f],T=this.current_duration,null!=p[f]&&this.setDuration(p[f].time,p[f].dot),this.addTabNote(N[f],V[f]),null!=k.note&&this.addStaveNote({spec:E,accidentals:a[f],play_note:V[f]}),this.addArticulations(l[f]),null!=d[f]&&this.addDecorator(d[f]);if(null!=e){for(r=[],g=O=1;y>=1?y>=O:O>=y;g=y>=1?++O:--O)r.push(e);this.addArticulations(r)}return null!=n?this.addDecorator(n):void 0}},n.prototype.addNote=function(t){return this.addChord([t])},n.prototype.addTextVoice=function(){return _.last(this.staves).text_voices.push([])},n.prototype.setTextFont=function(t){var e;return null!=t&&(e=t.match(/([^-]*)-([^-]*)-([^.]*)/),null!=e)?(this.customizations["font-face"]=e[1],this.customizations["font-size"]=parseInt(e[2],10),this.customizations["font-style"]=e[3]):void 0},n.prototype.addTextNote=function(t,e,n,i,s){var o,a,r,l,u,c,h,d;if(null==e&&(e=0),null==n&&(n="center"),null==i&&(i=!0),null==s&&(s=!1),d=_.last(this.staves).text_voices,_.isEmpty(d))throw new Vex.RERR("ArtistError","Can't add text note without text voice");return a=this.customizations["font-face"],r=this.customizations["font-size"],l=this.customizations["font-style"],u=function(){switch(n){case"center":return Vex.Flow.TextNote.Justification.CENTER;case"left":return Vex.Flow.TextNote.Justification.LEFT;case"right":return Vex.Flow.TextNote.Justification.RIGHT;default:return Vex.Flow.TextNote.Justification.CENTER}}(),o=s?"b":this.current_duration,h={text:t,duration:o,smooth:i,ignore_ticks:s,font:{family:a,size:r,weight:l}},"#"===t[0]&&(h.glyph=t.slice(1)),c=new Vex.Flow.TextNote(h).setLine(e).setJustification(u),_.last(d).push(c)},n.prototype.addVoice=function(t){var e;return this.closeBends(),e=_.last(this.staves),null==e?this.addStave(t):(_.isEmpty(e.tab_notes)||(e.tab_voices.push(e.tab_notes),e.tab_notes=[]),_.isEmpty(e.note_notes)?void 0:(e.note_voices.push(e.note_notes),e.note_notes=[]))},n.prototype.addStave=function(t){var e,n,s,o;n={tuning:"standard",clef:"treble",key:"C",notation:"false",tablature:"true"},_.extend(n,t),i("addTabStave: ",t),s=null,e=null,o=40,"true"===n.notation&&(e=new Vex.Flow.Stave(this.x,this.last_y,this.customizations.width-20).addClef(n.clef).addKeySignature(n.key),null!=n.time&&e.addTimeSignature(n.time),this.last_y+=e.getHeight()+this.options.note_stave_lower_spacing+parseInt(this.customizations["stave-distance"],10),o=e.getNoteStartX(),this.current_clef=n.clef),"true"===n.tablature&&(s=new Vex.Flow.TabStave(this.x,this.last_y,this.customizations.width-20).addTabGlyph().setNoteStartX(o),this.last_y+=s.getHeight()+this.options.tab_stave_lower_spacing),this.closeBends(),this.staves.push({tab:s,note:e,tab_voices:[],note_voices:[],tab_notes:[],note_notes:[],text_voices:[]}),this.tuning.setTuning(n.tuning),this.key_manager.setKey(n.key)},n.prototype.runCommand=function(t,e,n){var s;switch(null==e&&(e=0),null==n&&(n=0),i("runCommand: ",t),s=t.split(/\s+/),s[0]){case"octave-shift":return this.current_octave_shift=parseInt(s[1],10),i("Octave shift: ",this.current_octave_shift);default:throw new Vex.RERR("ArtistError","Invalid command '"+s[0]+"' at line "+e+" column "+n)}},n}()}).call(this);(function(){var t=[].slice,e=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};Vex.Flow.VexTab=function(){function r(t){this.artist=t,this.reset()}var a,s;return r.DEBUG=!1,a=function(){var e;return e=1<=arguments.length?t.call(arguments,0):[],Vex.Flow.VexTab.DEBUG?"undefined"!=typeof console&&null!==console?console.log.apply(console,["(Vex.Flow.VexTab)"].concat(t.call(e))):void 0:void 0},s=function(t,e){return new Vex.RERR("ParseError",""+e+" in line "+t._l+" column "+t._c)},r.prototype.reset=function(){return this.valid=!1,this.elements=!1},r.prototype.isValid=function(){return this.valid},r.prototype.parseStaveOptions=function(t){var r,a,n,o,i,u,l,c,h,p,d,f;if(u={notation:"false",tablature:"true"},null==t)return u;for(o=null,c=0,h=t.length;h>c;c++)switch(i=t[c],n=function(t){return s(i,t)},u[i.key]=i.value,i.key){case"notation":case"tablature":if(o=i,"true"!==(p=i.value)&&"false"!==p)throw n("'"+i.key+"' must be 'true' or 'false'");break;case"key":if(!_.has(Vex.Flow.keySignature.keySpecs,i.value))throw n("Invalid key signature '"+i.value+"'");break;case"clef":if(r=["treble","bass","tenor","alto","percussion"],d=i.value,e.call(r,d)<0)throw n("'clef' must be one of "+r.join(", "));break;case"voice":if(l=["top","bottom","new"],f=i.value,e.call(l,f)<0)throw n("'voice' must be one of "+l.join(", "));break;case"time":try{new Vex.Flow.TimeSignature(i.value)}catch(m){throw a=m,n("Invalid time signature: '"+i.value+"'")}break;case"tuning":try{new Vex.Flow.Tuning(i.value)}catch(m){throw a=m,n("Invalid tuning: '"+i.value+"'")}break;default:throw n("Invalid option '"+i.key+"'")}if("false"===u.notation&&"false"===u.tablature)throw s(o,"Both 'notation' and 'tablature' can't be invisible");return u},r.prototype.parseCommand=function(t){return"bar"===t.command&&this.artist.addBar(t.type),"tuplet"===t.command&&this.artist.makeTuplets(t.params.tuplet,t.params.notes),"annotations"===t.command&&this.artist.addAnnotations(t.params),"rest"===t.command&&this.artist.addRest(t.params),"command"===t.command?this.artist.runCommand(t.params,t._l,t._c):void 0},r.prototype.parseChord=function(t){return a("parseChord:",t),this.artist.addChord(_.map(t.chord,function(t){return _.pick(t,"time","dot","fret","abc","octave","string","articulation","decorator")}),t.articulation,t.decorator)},r.prototype.parseFret=function(t){return this.artist.addNote(_.pick(t,"time","dot","fret","string","articulation","decorator"))},r.prototype.parseABC=function(t){return this.artist.addNote(_.pick(t,"time","dot","fret","abc","octave","string","articulation","decorator"))},r.prototype.parseStaveElements=function(t){var e,r,s,n;for(a("parseStaveElements:",t),n=[],r=0,s=t.length;s>r;r++)e=t[r],e.time&&this.artist.setDuration(e.time,e.dot),e.command&&this.parseCommand(e),e.chord&&this.parseChord(e),e.abc?n.push(this.parseABC(e)):e.fret?n.push(this.parseFret(e)):n.push(void 0);return n},r.prototype.parseStaveText=function(t){var e,r,a,n,o,i,u,l,c,h,p,d;for(_.isEmpty(t)||this.artist.addTextVoice(),i=0,o="center",u=!0,n=null,e=function(t){return function(){return t.artist.addTextNote("",0,o,!1,!0)}}(this),a=function(t){return function(e){var r,a;a=!1,"|"===e[0]&&(a=!0,e=e.slice(1));try{return t.artist.addTextNote(e,i,o,u,a)}catch(n){throw r=n,s(l,"Bad text or duration. Did you forget a comma?"+r)}}}(this),d=[],h=0,p=t.length;p>h;h++)if(l=t[h],c=l.text.trim(),c.match(/\.font=.*/))n=c.slice(6),d.push(this.artist.setTextFont(n));else if(":"===c[0])d.push(this.artist.setDuration(c));else if("."===c[0])switch(r=c.slice(1)){case"center":case"left":case"right":d.push(o=r);break;case"strict":d.push(u=!1);break;case"smooth":d.push(u=!0);break;case"bar":case"|":d.push(e());break;default:d.push(i=parseInt(c.slice(1),10))}else"|"===c?d.push(e()):"++"===c.slice(0,2)?d.push(this.artist.addTextVoice()):d.push(a(c));return d},r.prototype.generate=function(){var t,e,r,a,n,o,i,u,l,c,h;for(l=this.elements,h=[],n=0,i=l.length;i>n;n++)switch(a=l[n],a.element){case"stave":case"tabstave":this.artist.addStave(this.parseStaveOptions(a.options)),null!=a.notes&&this.parseStaveElements(a.notes),null!=a.text?h.push(this.parseStaveText(a.text)):h.push(void 0);break;case"voice":this.artist.addVoice(this.parseStaveOptions(a.options)),null!=a.notes&&this.parseStaveElements(a.notes),null!=a.text?h.push(this.parseStaveText(a.text)):h.push(void 0);break;case"options":for(r={},c=a.params,o=0,u=c.length;u>o;o++)e=c[o],r[e.key]=e.value;try{h.push(this.artist.setOptions(r))}catch(p){throw t=p,s(a,t.message)}break;default:throw s(a,"Invalid keyword '"+a.element+"'")}return h},r.prototype.parse=function(t){var e,r;if(vextab_parser.parseError=function(t,e){throw a("VexTab parse error: ",t,e),t="Unexpected text '"+e.text+"' at line "+e.loc.first_line+" column "+e.loc.first_column+".",new Vex.RERR("ParseError",t)},null==t)throw new Vex.RERR("ParseError","No code");return a("Parsing:\n"+t),r=function(){var r,a,s,n;for(s=t.split(/\r\n|\r|\n/),n=[],r=0,a=s.length;a>r;r++)e=s[r],n.push(e.trim());return n}(),this.elements=vextab_parser.parse(r.join("\n")),this.elements&&(this.generate(),this.valid=!0),this.elements},r}()}).call(this);